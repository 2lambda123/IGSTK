<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Flock: flock.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">beck</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">data</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">dgobbi</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">IGSTK</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">Sandbox</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Utilities</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">Atamai</a>&nbsp;/&nbsp;<a class="el" href="dir_000007.html">flock</a></div>
<h1>flock.h</h1><a href="flock_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*=======================================================================</span>
00002 <span class="comment"></span>
00003 <span class="comment">  Program:   Flock of Birds C Interface Library</span>
00004 <span class="comment">  Module:    flock_8h-source.html</span>
00005 <span class="comment">  Creator:   David Gobbi &lt;dgobbi@atamai.com&gt;</span>
00006 <span class="comment">  Language:  C</span>
00007 <span class="comment">  Author:    $Author: dgobbi $</span>
00008 <span class="comment">  Date:      $Date: 2008/04/01 16:16:48 $</span>
00009 <span class="comment">  Version:   $Revision: 1.2 $</span>
00010 <span class="comment"></span>
00011 <span class="comment">==========================================================================</span>
00012 <span class="comment"></span>
00013 <span class="comment">Copyright (c) 2000-2005 Atamai, Inc.</span>
00014 <span class="comment"></span>
00015 <span class="comment">Use, modification and redistribution of the software, in source or</span>
00016 <span class="comment">binary forms, are permitted provided that the following terms and</span>
00017 <span class="comment">conditions are met:</span>
00018 <span class="comment"></span>
00019 <span class="comment">1) Redistribution of the source code, in verbatim or modified</span>
00020 <span class="comment">   form, must retain the above copyright notice, this license,</span>
00021 <span class="comment">   the following disclaimer, and any notices that refer to this</span>
00022 <span class="comment">   license and/or the following disclaimer.  </span>
00023 <span class="comment"></span>
00024 <span class="comment">2) Redistribution in binary form must include the above copyright</span>
00025 <span class="comment">   notice, a copy of this license and the following disclaimer</span>
00026 <span class="comment">   in the documentation or with other materials provided with the</span>
00027 <span class="comment">   distribution.</span>
00028 <span class="comment"></span>
00029 <span class="comment">3) The name of the Atamai Inc., nor of its principals or owners,</span>
00030 <span class="comment">   past or present, may be used to ensorse or promote products derived
   from this software without specific prior written permission.</span>
00031 <span class="comment"></span>
00032 <span class="comment">THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE SOFTWARE "AS IS"</span>
00033 <span class="comment">WITHOUT EXPRESSED OR IMPLIED WARRANTY INCLUDING, BUT NOT LIMITED TO,</span>
00034 <span class="comment">THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span>
00035 <span class="comment">PURPOSE.  IN NO EVENT SHALL ANY COPYRIGHT HOLDER OR OTHER PARTY WHO MAY</span>
00036 <span class="comment">MODIFY AND/OR REDISTRIBUTE THE SOFTWARE UNDER THE TERMS OF THIS LICENSE</span>
00037 <span class="comment">BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL OR CONSEQUENTIAL DAMAGES</span>
00038 <span class="comment">(INCLUDING, BUT NOT LIMITED TO, LOSS OF DATA OR DATA BECOMING INACCURATE</span>
00039 <span class="comment">OR LOSS OF PROFIT OR BUSINESS INTERRUPTION) ARISING IN ANY WAY OUT OF</span>
00040 <span class="comment">THE USE OR INABILITY TO USE THE SOFTWARE, EVEN IF ADVISED OF THE</span>
00041 <span class="comment">POSSIBILITY OF SUCH DAMAGES.</span>
00042 <span class="comment"></span>
00043 <span class="comment">=======================================================================*/</span>
00044 <span class="comment"></span>
00045 <span class="comment">/** \file flock.h */</span>
00046 
00047 <span class="preprocessor">#ifndef FLOCK_H</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define FLOCK_H 1</span>
00049 <span class="preprocessor"></span>
00050 <span class="preprocessor">#ifdef __cplusplus</span>
00051 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00052 <span class="preprocessor">#endif</span>
00053 <span class="preprocessor"></span><span class="comment"></span>
00054 <span class="comment">/** \name Bird Commands</span>
00055 <span class="comment"></span>
00056 <span class="comment">Every bird command consists of a single byte.  The commands can be</span>
00057 <span class="comment">sent using either fbSendCommand(), fbSendCommandBytes(), or </span>
00058 <span class="comment">fbSendCommandWords() depending on whether there is any data</span>
00059 <span class="comment">associated with the command and whether the data is formatted as</span>
00060 <span class="comment">8-bit bytes or 16-bit words.</span>
00061 <span class="comment">*/</span>
00062 <span class="comment">/*\{*/</span>
00063 <span class="preprocessor">#define FB_POINT               'B'</span>
00064 <span class="preprocessor"></span><span class="preprocessor">#define FB_STREAM              '@'</span>
00065 <span class="preprocessor"></span><span class="preprocessor">#define FB_REPORT_RATE_FULL    'Q'</span>
00066 <span class="preprocessor"></span><span class="preprocessor">#define FB_REPORT_RATE_DIV2    'R'</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#define FB_REPORT_RATE_DIV8    'S'</span>
00068 <span class="preprocessor"></span><span class="preprocessor">#define FB_REPORT_RATE_DIV32   'T'</span>
00069 <span class="preprocessor"></span>
00070 <span class="preprocessor">#define FB_POSITION            'V'</span>
00071 <span class="preprocessor"></span><span class="preprocessor">#define FB_ANGLES              'W'</span>
00072 <span class="preprocessor"></span><span class="preprocessor">#define FB_MATRIX              'X'</span>
00073 <span class="preprocessor"></span><span class="preprocessor">#define FB_POSITION_ANGLES     'Y'</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#define FB_POSITION_MATRIX     'Z'</span>
00075 <span class="preprocessor"></span><span class="preprocessor">#define FB_QUATERNION          '\\'</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#define FB_POSITION_QUATERNION ']'</span>
00077 <span class="preprocessor"></span>
00078 <span class="preprocessor">#define FB_BUTTON_MODE         'M'</span>
00079 <span class="preprocessor"></span><span class="preprocessor">#define FB_BUTTON_READ         'N'</span>
00080 <span class="preprocessor"></span>
00081 <span class="preprocessor">#define FB_ANGLE_ALIGN1        'J'</span>
00082 <span class="preprocessor"></span><span class="preprocessor">#define FB_REFERENCE_FRAME1    'H'</span>
00083 <span class="preprocessor"></span><span class="preprocessor">#define FB_ANGLE_ALIGN2        'q'</span>
00084 <span class="preprocessor"></span><span class="preprocessor">#define FB_REFERENCE_FRAME2    'r'</span>
00085 <span class="preprocessor"></span>
00086 <span class="preprocessor">#define FB_FBB_RESET           '/'</span>
00087 <span class="preprocessor"></span><span class="preprocessor">#define FB_HEMISPHERE          'L'</span>
00088 <span class="preprocessor"></span><span class="preprocessor">#define FB_NEXT_TRANSMITTER    '0'</span>
00089 <span class="preprocessor"></span><span class="preprocessor">#define FB_RUN                 'F'</span>
00090 <span class="preprocessor"></span><span class="preprocessor">#define FB_SLEEP               'G'</span>
00091 <span class="preprocessor"></span><span class="preprocessor">#define FB_SYNC                'A'</span>
00092 <span class="preprocessor"></span><span class="preprocessor">#define FB_XOFF                '\x13'</span>
00093 <span class="preprocessor"></span><span class="preprocessor">#define FB_XON                 '\x11'</span>
00094 <span class="preprocessor"></span> 
00095 <span class="preprocessor">#define FB_RS232_TO_FBB        '\xF0'</span>
00096 <span class="preprocessor"></span><span class="preprocessor">#define FB_RS232_TO_FBB_E      '\xE0'</span>
00097 <span class="preprocessor"></span><span class="preprocessor">#define FB_RS232_TO_FBB_SE     '\xA0'</span>
00098 <span class="preprocessor"></span>
00099 <span class="preprocessor">#define FB_EXAMINE_VALUE       'O'</span>
00100 <span class="preprocessor"></span><span class="preprocessor">#define FB_CHANGE_VALUE        'P'</span>
00101 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00102 <span class="comment"></span>
00103 <span class="comment">/** \name Bird Status Bits</span>
00104 <span class="comment"></span>
00105 <span class="comment">The bird status parameter FB_STATUS can be examined using the</span>
00106 <span class="comment">fbExamineValue() function.  The status consists of 16 bits as</span>
00107 <span class="comment">defined below:</span>
00108 <span class="comment">*/</span>
00109 <span class="comment">/*\{*/</span>
00110 <span class="preprocessor">#define FB_STATUS_STREAMING   0x0001</span>
00111 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_FORMAT      0x001E</span>
00112 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_SLEEPING    0x0020</span>
00113 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_XOFF        0x0040</span>
00114 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_FACTORY     0x0080</span>
00115 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_NO_SYNC     0x0100</span>
00116 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_CRT_SYNC    0x0200</span>
00117 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_EXPANDED    0x0400  </span><span class="comment">/* expanded addressing mode */</span>
00118 <span class="preprocessor">#define FB_STATUS_HOST_SYNC   0x0800</span>
00119 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_RUNNING     0x1000</span>
00120 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_ERROR       0x2000</span>
00121 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_INITIALIZED 0x4000</span>
00122 <span class="preprocessor"></span><span class="preprocessor">#define FB_STATUS_MASTER      0x8000</span>
00123 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00124 <span class="comment"></span>
00125 <span class="comment">/** \name Flock Status Bits</span>
00126 <span class="comment"></span>
00127 <span class="comment">The FB_FBB_STATUS parameter can be examined using fbExamineValueBytes(),</span>
00128 <span class="comment">which will provide one status byte for each bird supported by</span>
00129 <span class="comment">the current addressing mode: 14 in FB_NORMAL addressing mode, </span>
00130 <span class="comment">30 in FB_EXPANDED addressing mode, and 126 in FB_SUPER_EXPANDED</span>
00131 <span class="comment">addressing mode.  The bits for each bird are defined below.</span>
00132 <span class="comment">*/</span>
00133 <span class="comment">/*\{*/</span>
00134 <span class="preprocessor">#define FB_FBB_STATUS_ERT0        0x01</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_ERT1        0x02</span>
00136 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_ERT2        0x04</span>
00137 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_ERT3        0x08</span>
00138 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_ERT         0x10</span>
00139 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_SENSOR      0x20</span>
00140 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_RUNNING     0x40</span>
00141 <span class="preprocessor"></span><span class="preprocessor">#define FB_FBB_STATUS_ACCESSIBLE  0x80</span>
00142 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00143 <span class="comment"></span>
00144 <span class="comment">/** \name Error Codes</span>
00145 <span class="comment"></span>
00146 <span class="comment">The following error codes are returned by fbGetError():</span>
00147 <span class="comment">*/</span>
00148 <span class="comment">/*\{*/</span>
00149 <span class="preprocessor">#define FB_OPEN_ERROR     1     </span><span class="comment">/* error opening serial port */</span>
00150 <span class="preprocessor">#define FB_COM_ERROR      2     </span><span class="comment">/* error setting COM port parameters */</span>
00151 <span class="preprocessor">#define FB_IO_ERROR       3     </span><span class="comment">/* some sort of I/O error */</span>
00152 <span class="preprocessor">#define FB_TIMEOUT_ERROR  4     </span><span class="comment">/* communications timeout error */</span>
00153 <span class="preprocessor">#define FB_PARM_ERROR     5     </span><span class="comment">/* bad examine/change parameter */</span>
00154 <span class="preprocessor">#define FB_COMMAND_ERROR  6     </span><span class="comment">/* unrecognized bird command */</span>
00155 <span class="preprocessor">#define FB_ILLEGAL_ERROR  7     </span><span class="comment">/* action is illegal in this state */</span> 
00156 <span class="preprocessor">#define FB_PHASE_ERROR    8     </span><span class="comment">/* phase error: comm port is dropping bytes */</span>
00157 <span class="preprocessor">#define FB_RESOURCE_ERROR 9     </span><span class="comment">/* out of system resources */</span>
00158 <span class="preprocessor">#define FB_MODE_ERROR     10    </span><span class="comment">/* specified bad mode when opening flock */</span>
00159 <span class="comment">/*\}*/</span>
00160 <span class="comment"></span>
00161 <span class="comment">/** \name Addressing Modes</span>
00162 <span class="comment"></span>
00163 <span class="comment">The FB_FBB_ADDRESS_MODE parameter can be examined with fbExamineValue().</span>
00164 <span class="comment">It is set via the dip switches on the bird units.</span>
00165 <span class="comment">The FB_NORMAL mode supports 14 birds, FB_EXPANDED supports 30 birds, and</span>
00166 <span class="comment">FB_SUPER_EXPANDED supports 126 birds.</span>
00167 <span class="comment">*/</span>
00168 <span class="comment">/*\{*/</span>
00169 <span class="preprocessor">#define FB_NORMAL           0</span>
00170 <span class="preprocessor"></span><span class="preprocessor">#define FB_EXPANDED         1</span>
00171 <span class="preprocessor"></span><span class="preprocessor">#define FB_SUPER_EXPANDED   3</span>
00172 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00173 <span class="comment"></span>
00174 <span class="comment">/** \name Hemispheres</span>
00175 <span class="comment"></span>
00176 <span class="comment">The FB_P_HEMISPHERE parameter can be examined with fbExamineValue() and</span>
00177 <span class="comment">changed with fbChangeValue().  Alternatively, it can be changed by</span>
00178 <span class="comment">sending the FB_HEMISPHERE command to the flock.</span>
00179 <span class="comment">*/</span>
00180 <span class="comment">/*\{*/</span>
00181 <span class="preprocessor">#define FB_FORWARD 0x0000</span>
00182 <span class="preprocessor"></span><span class="preprocessor">#define FB_AFT     0x0100</span>
00183 <span class="preprocessor"></span><span class="preprocessor">#define FB_UPPER   0x010C</span>
00184 <span class="preprocessor"></span><span class="preprocessor">#define FB_LOWER   0x000C</span>
00185 <span class="preprocessor"></span><span class="preprocessor">#define FB_LEFT    0x0106</span>
00186 <span class="preprocessor"></span><span class="preprocessor">#define FB_RIGHT   0x0006</span>
00187 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00188 <span class="comment"></span>
00189 <span class="comment">/** \name Position Scaling</span>
00190 <span class="comment"></span>
00191 <span class="comment">The FB_POSITION_SCALING parameter is specified here in millimeters</span>
00192 <span class="comment">rather than inches.  The extended range transmitters are not yet</span>
00193 <span class="comment">supported, so only FB_STANDARD and FB_EXTENDED modes are available.</span>
00194 <span class="comment">The mode can be examined with fbExamineValue() or changed with</span>
00195 <span class="comment">fbChangeValue().</span>
00196 <span class="comment">*/</span>
00197 <span class="comment">/*\{*/</span>
00198 <span class="preprocessor">#define FB_914MM   0</span>
00199 <span class="preprocessor"></span><span class="preprocessor">#define FB_1828MM  1</span>
00200 <span class="preprocessor"></span><span class="preprocessor">#define FB_STANDARD FB_914MM</span>
00201 <span class="preprocessor"></span><span class="preprocessor">#define FB_EXTENDED FB_1928MM</span>
00202 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00203 
00204 <span class="comment">/* miscellaneous */</span>
00205 <span class="preprocessor">#define PI             3.14159265359</span>
00206 <span class="preprocessor"></span><span class="preprocessor">#define TIMEOUT_PERIOD 5000     </span><span class="comment">/* timeout period in milliseconds */</span>
00207 <span class="comment"></span>
00208 <span class="comment">/** \name Change/Examine Parameters</span>
00209 <span class="comment"></span>
00210 <span class="comment">The parameters can be examined using fbExamineValue(), </span>
00211 <span class="comment">fbExamineValueBytes(), or fbExamineValueWords().  Certain</span>
00212 <span class="comment">parameters can be changed with fbChangeValue(),</span>
00213 <span class="comment">fbChangeValueBytes(), or fbChangeValueWords().</span>
00214 <span class="comment">*/</span>
00215 <span class="comment">/*\{*/</span>
00216 <span class="preprocessor">#define FB_STATUS             0    </span><span class="comment">/* Bird status */</span>
00217 <span class="preprocessor">#define FB_REVISION           1    </span><span class="comment">/* Software revision number */</span>
00218 <span class="preprocessor">#define FB_SPEED              2    </span><span class="comment">/* Bird computer crystal speed */</span>
00219 <span class="preprocessor">#define FB_POSITION_SCALING   3    </span><span class="comment">/* Position scaling */</span>
00220 
00221 <span class="preprocessor">#define FB_FILTER             4    </span><span class="comment">/* Filter on/off status */</span>
00222 <span class="preprocessor">#define FB_ALPHA_MIN          5    </span><span class="comment">/* DC Filter constant table ALPHA_MIN */</span>
00223 <span class="preprocessor">#define FB_RATE_COUNT         6    </span><span class="comment">/* Bird measurement rate count */</span>
00224 <span class="preprocessor">#define FB_RATE               7    </span><span class="comment">/* Bird measurement rate */</span>
00225 
00226 <span class="preprocessor">#define FB_DATA_READY         8    </span><span class="comment">/* Disable/Enable data ready output */</span>
00227 <span class="preprocessor">#define FB_DATA_READY_CHAR    9    </span><span class="comment">/* Changes data ready character */</span>
00228 <span class="preprocessor">#define FB_ERROR_CODE        10    </span><span class="comment">/* Bird outputs an error code */</span>
00229 <span class="preprocessor">#define FB_ERROR_BEHAVIOR    11    </span><span class="comment">/* On error: stop or don't stop Bird  */</span>
00230 
00231 <span class="preprocessor">#define FB_VM                12    </span><span class="comment">/* DC filter constant table Vm */</span>
00232 <span class="preprocessor">#define FB_ALPHA_MAX         13    </span><span class="comment">/* DC filter constant table ALPHA_MAX */</span>
00233 <span class="preprocessor">#define FB_ELIMINATION       14    </span><span class="comment">/* Sudden output change elimination */</span>
00234 <span class="preprocessor">#define FB_IDENTIFICATION    15    </span><span class="comment">/* System Model Identification */</span>
00235 
00236 <span class="preprocessor">#define FB_ERROR_CODE_EXPANDED 16  </span><span class="comment">/* Expanded Error Code */</span>
00237 <span class="preprocessor">#define FB_REFERENCE_FRAME   17    </span><span class="comment">/* XYZ Reference Frame */</span>
00238 <span class="preprocessor">#define FB_TRANSMITTER_MODE  18    </span><span class="comment">/* Transmitter Operation Mode */</span>
00239 <span class="preprocessor">#define FB_FBB_ADDRESS_MODE  19    </span><span class="comment">/* FBB addressing mode */</span>
00240 
00241 <span class="preprocessor">#define FB_LINE_FILTER       20    </span><span class="comment">/* Filter line frequency */</span>
00242 <span class="preprocessor">#define FB_FBB_ADDRESS       21    </span><span class="comment">/* FBB address */</span>
00243 <span class="preprocessor">#define FB_P_HEMISPHERE      22    </span><span class="comment">/* Change / Examine Hemisphere */</span>
00244 <span class="preprocessor">#define FB_P_ANGLE_ALIGN2    23    </span><span class="comment">/* Change / Examine Angle Align2 */</span>
00245 
00246 <span class="preprocessor">#define FB_P_REFERENCE_FRAME2 24   </span><span class="comment">/* Change / Examine Reference Frame2 */</span>
00247 <span class="preprocessor">#define FB_SERIAL_NUMBER     25    </span><span class="comment">/* Bird Serial Number */</span>
00248 <span class="preprocessor">#define FB_SENSOR_SERIAL_NUMBER 26 </span><span class="comment">/* Sensor Serial Number */</span>
00249 <span class="preprocessor">#define FB_XMTR_SERIAL_NUMBER 27   </span><span class="comment">/* Xmtr Serial Number */</span>
00250 
00251 <span class="preprocessor">#define FB_FBB_DELAY    32         </span><span class="comment">/* FBB Host Delay */</span>
00252 <span class="preprocessor">#define FB_GROUP_MODE   35         </span><span class="comment">/* Group Mode */</span>
00253 
00254 <span class="preprocessor">#define FB_FBB_STATUS   36         </span><span class="comment">/* Flock System Status */</span>
00255 
00256 <span class="preprocessor">#define FB_FBB_AUTOCONFIG    50    </span><span class="comment">/* FBB Auto-Configuration, 1 xmtr/N snsrs */</span>
00257 <span class="comment">/*\}*/</span>
00258 <span class="comment"></span>
00259 <span class="comment">/** \name Baud Rates</span>
00260 <span class="comment"></span>
00261 <span class="comment">The following baud rates are supported by fbOpen():</span>
00262 <span class="comment">*/</span>
00263 <span class="comment">/*\{*/</span>
00264 <span class="preprocessor">#define FB_2400   0          </span><span class="comment">/* 2400 baud, etc, etc */</span>
00265 <span class="preprocessor">#define FB_4800   1</span>
00266 <span class="preprocessor"></span><span class="preprocessor">#define FB_9600   2</span>
00267 <span class="preprocessor"></span><span class="preprocessor">#define FB_19200  3</span>
00268 <span class="preprocessor"></span><span class="preprocessor">#define FB_38400  4</span>
00269 <span class="preprocessor"></span><span class="preprocessor">#define FB_57600  5</span>
00270 <span class="preprocessor"></span><span class="preprocessor">#define FB_115200 6</span>
00271 <span class="preprocessor"></span><span class="comment">/*\}*/</span>
00272 <span class="comment"></span>
00273 <span class="comment">/** \name Synchronization Modes</span>
00274 <span class="comment"></span>
00275 <span class="comment">The following synchronization modes are supported by fbOpen().</span>
00276 <span class="comment">*/</span>
00277 <span class="comment">/*\{*/</span>
00278 <span class="preprocessor">#define FB_NOTHREAD 0  </span><span class="comment">/* synchronous mode, no multithreading */</span> 
00279 <span class="preprocessor">#define FB_THREAD   1  </span><span class="comment">/* spawn a streaming thread, improves performance */</span>
00280 <span class="preprocessor">#define FB_NONBLOCK 2  </span><span class="comment">/* never block, i.e. allow duplicate readings */</span>
00281 <span class="comment">/*\}*/</span>
00282 
00283 <span class="comment">/* the flock structure: NEVER modify any parameters directly */</span>
00284 
00285 <span class="keyword">struct </span>fbird;
00286 <span class="keyword">typedef</span> <span class="keyword">struct </span>fbird fbird;
00287                                                                       
00288 <span class="comment">/* get a serial port device name, given an integer starting at zero */</span>
00289 
00290 <span class="keywordtype">char</span> *<a class="code" href="group__SetupMethods.html#ga0">fbDeviceName</a>(<span class="keywordtype">int</span> i);
00291 
00292 <span class="comment">/* allocation/destruction of the flock structure */</span>
00293 
00294 fbird *<a class="code" href="group__SetupMethods.html#ga1">fbNew</a>();            <span class="comment">/* create &amp; initialize flock structure */</span>
00295 <span class="keywordtype">void</span> <a class="code" href="group__SetupMethods.html#ga2">fbDelete</a>(fbird *fb);  <span class="comment">/* delete flock */</span>
00296 
00297 <span class="comment">/* open/close communication with the flock */</span>
00298 
00299 <span class="keywordtype">int</span> <a class="code" href="group__SetupMethods.html#ga3">fbOpen</a>(fbird *fb, <span class="keyword">const</span> <span class="keywordtype">char</span> *device, <span class="keywordtype">int</span> baud, <span class="keywordtype">int</span> mode);
00300 <span class="keywordtype">void</span> <a class="code" href="group__SetupMethods.html#ga4">fbClose</a>(fbird *fb);
00301 
00302 <span class="comment">/* do a hardware reset of the flock */</span> 
00303 
00304 <span class="keywordtype">void</span> <a class="code" href="group__SetupMethods.html#ga5">fbReset</a>(fbird *fb);
00305 
00306 <span class="comment">/* hemisphere control -- hemisphere is FB_AFT etc. as defined above*/</span>
00307 
00308 <span class="keywordtype">void</span> <a class="code" href="group__ConfigureMethods.html#ga0">fbSetHemisphere</a>(fbird *fb, <span class="keywordtype">int</span> hemisphere);
00309 
00310 <span class="comment">/* data format control */</span>
00311 
00312 <span class="keywordtype">void</span> <a class="code" href="group__ConfigureMethods.html#ga1">fbSetFormat</a>(fbird *fb, <span class="keywordtype">int</span> format); <span class="comment">/* format is FB_POSITION, etc */</span>
00313 <span class="keywordtype">void</span> <a class="code" href="group__ConfigureMethods.html#ga2">fbSetButtonMode</a>(fbird *fb, <span class="keywordtype">int</span> mode); <span class="comment">/* set buttons on/off  */</span>
00314 
00315 <span class="comment">/* standard data request methods */</span>
00316 
00317 <span class="keywordtype">void</span> <a class="code" href="group__RequestMethods.html#ga2">fbPoint</a>(fbird *fb);              <span class="comment">/* request only one data record */</span>
00318 <span class="keywordtype">void</span> <a class="code" href="group__RequestMethods.html#ga0">fbStream</a>(fbird *fb);             <span class="comment">/* start streaming acquisition */</span>
00319 <span class="keywordtype">void</span> <a class="code" href="group__RequestMethods.html#ga1">fbEndStream</a>(fbird *fb);          <span class="comment">/* end streaming acquisition */</span>
00320 
00321 <span class="comment">/* standard data acquisition methods, use in and out of streaming mode */</span>
00322 <span class="comment">/* fbGetTime() returns 'unix' time, i.e. seconds since new year's 1970 */</span> 
00323 
00324 <span class="keywordtype">int</span> <a class="code" href="group__DataMethods.html#ga0">fbUpdate</a>(fbird *fb);             <span class="comment">/* get next data record */</span>
00325 <span class="keywordtype">void</span> <a class="code" href="group__DataMethods.html#ga1">fbGetPosition</a>(fbird *fb, <span class="keywordtype">float</span> xyz[3]);
00326 <span class="keywordtype">void</span> <a class="code" href="group__DataMethods.html#ga2">fbGetAngles</a>(fbird *fb, <span class="keywordtype">float</span> zyx[3]);
00327 <span class="keywordtype">void</span> <a class="code" href="group__DataMethods.html#ga3">fbGetMatrix</a>(fbird *fb, <span class="keywordtype">float</span> a[9]);
00328 <span class="keywordtype">void</span> <a class="code" href="group__DataMethods.html#ga4">fbGetQuaternion</a>(fbird *fb, <span class="keywordtype">float</span> q[4]);
00329 <span class="keywordtype">int</span> <a class="code" href="group__DataMethods.html#ga5">fbGetButton</a>(fbird *fb);           <span class="comment">/* true if button pressed */</span>
00330 <span class="keywordtype">int</span> <a class="code" href="group__DataMethods.html#ga6">fbGetBird</a>(fbird *fb);             <span class="comment">/* which bird data is from */</span>
00331 <span class="keywordtype">double</span> <a class="code" href="group__DataMethods.html#ga7">fbGetTime</a>(fbird *fb);          <span class="comment">/* when the data was acquired */</span>
00332 
00333 <span class="comment">/* data morph methods: convert data from one form to another */</span>
00334 
00335 <span class="keywordtype">void</span> <a class="code" href="group__ConversionMethods.html#ga0">fbMatrixFromAngles</a>(<span class="keywordtype">float</span> a[9], <span class="keyword">const</span> <span class="keywordtype">float</span> zyx[3]);
00336 <span class="keywordtype">void</span> <a class="code" href="group__ConversionMethods.html#ga1">fbAnglesFromMatrix</a>(<span class="keywordtype">float</span> zyx[3], <span class="keyword">const</span> <span class="keywordtype">float</span> a[9]);
00337 
00338 <span class="comment">/* commands for dealing with multiple birds */</span>
00339 
00340 <span class="keywordtype">void</span> <a class="code" href="group__FlockMethods.html#ga0">fbFBBReset</a>(fbird *fb);
00341 <span class="keywordtype">void</span> <a class="code" href="group__FlockMethods.html#ga1">fbFBBAutoConfig</a>(fbird *fb, <span class="keywordtype">int</span> num);
00342 <span class="keywordtype">void</span> <a class="code" href="group__FlockMethods.html#ga2">fbRS232ToFBB</a>(fbird *fb, <span class="keywordtype">int</span> bird);
00343 
00344 <span class="comment">/* standard command interface */</span>
00345 
00346 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga6">fbSendCommand</a>(fbird *fb, <span class="keywordtype">int</span> command);
00347 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga7">fbSendCommandWords</a>(fbird *fb, <span class="keywordtype">int</span> command, <span class="keyword">const</span> <span class="keywordtype">short</span> *data);
00348 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga8">fbSendCommandBytes</a>(fbird *fb, <span class="keywordtype">int</span> command, <span class="keyword">const</span> <span class="keywordtype">char</span> *data);
00349 
00350 <span class="comment">/* examine or change internal bird info, see bird manual for more info */</span>
00351 
00352 <span class="keywordtype">int</span> <a class="code" href="group__CommandMethods.html#ga0">fbExamineValue</a>(fbird *fb, <span class="keywordtype">int</span> parm);
00353 <span class="keywordtype">int</span> <a class="code" href="group__CommandMethods.html#ga1">fbExamineValueWords</a>(fbird *fb, <span class="keywordtype">int</span> parm, <span class="keywordtype">short</span> *data);
00354 <span class="keywordtype">int</span> <a class="code" href="group__CommandMethods.html#ga2">fbExamineValueBytes</a>(fbird *fb, <span class="keywordtype">int</span> parm, <span class="keywordtype">char</span> *data);
00355 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga3">fbChangeValue</a>(fbird *fb, <span class="keywordtype">int</span> parm, <span class="keywordtype">int</span> data);
00356 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga4">fbChangeValueWords</a>(fbird *fb, <span class="keywordtype">int</span> parm, <span class="keyword">const</span> <span class="keywordtype">short</span> *data);
00357 <span class="keywordtype">void</span> <a class="code" href="group__CommandMethods.html#ga5">fbChangeValueBytes</a>(fbird *fb, <span class="keywordtype">int</span> parm, <span class="keyword">const</span> <span class="keywordtype">char</span> *data);
00358 
00359 <span class="comment">/* error reporting */</span>
00360 <span class="comment">/* if the error is FB_TIMEOUT_ERROR, the bird itself probably has an error</span>
00361 <span class="comment">   which you can retrieve with fbExamineValue(fb,FB_ERROR_CODE) */</span>
00362 
00363 <span class="keywordtype">int</span> <a class="code" href="group__ErrorMethods.html#ga0">fbGetError</a>(fbird *fb);          <span class="comment">/* get error code (zero if no error) */</span>
00364 <span class="keywordtype">char</span> *<a class="code" href="group__ErrorMethods.html#ga1">fbGetErrorMessage</a>(fbird *fb); <span class="comment">/* get text error message */</span>
00365 <span class="keywordtype">void</span> <a class="code" href="group__ErrorMethods.html#ga2">fbSetErrorCallback</a>(fbird *fb, <span class="keywordtype">void</span> (*callback)(<span class="keywordtype">void</span> *data), 
00366                         <span class="keywordtype">void</span> *data);
00367 
00368 <span class="comment">/* one-shot data acquisition -- use fbSetButtonMode instead */</span>
00369 
00370 <span class="keywordtype">void</span> <a class="code" href="group__RequestMethods.html#ga3">fbButtonRead</a>(fbird *fb, <span class="keywordtype">int</span> *val);  <span class="comment">/* return button state */</span> 
00371 
00372 <span class="comment">/* utility functions */</span>
00373 
00374 <span class="keywordtype">int</span> <a class="code" href="group__RawMethods.html#ga2">fbUnpack</a>(<span class="keywordtype">char</span> **cpp); <span class="comment">/* unpack two phase-packed chars into a short */</span>
00375 <span class="keywordtype">int</span> <a class="code" href="group__ConversionMethods.html#ga2">fbGetShort</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cp); <span class="comment">/* unpack two chars into a short */</span>
00376 <span class="keywordtype">void</span> <a class="code" href="group__ConversionMethods.html#ga3">fbPutShort</a>(<span class="keywordtype">char</span> *cp, <span class="keywordtype">int</span> val); <span class="comment">/* convert a short into two chars */</span>
00377 
00378 <span class="comment">/* ultra low-level interface, for use only for diagnostics  */</span>
00379 
00380 <span class="keywordtype">void</span> <a class="code" href="group__RawMethods.html#ga1">fbReceiveRaw</a>(fbird *fb, <span class="keywordtype">char</span> *reply, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> thread);
00381 <span class="keywordtype">void</span> <a class="code" href="group__RawMethods.html#ga0">fbSendRaw</a>(fbird *fb, <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keywordtype">int</span> len);
00382 
00383 
00384 <span class="preprocessor">#ifdef __cplusplus</span>
00385 <span class="preprocessor"></span>}
00386 <span class="preprocessor">#endif</span>
00387 <span class="preprocessor"></span>
00388 <span class="preprocessor">#endif </span><span class="comment">/* FLOCK_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jan 12 16:38:30 2006 for Flock by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
