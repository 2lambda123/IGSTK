<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Flock: Decoding Flock Data</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Decoding Flock Data</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga0">fbUpdate</a> (fbird *fb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga1">fbGetPosition</a> (fbird *fb, float xyz[3])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga2">fbGetAngles</a> (fbird *fb, float zyx[3])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga3">fbGetMatrix</a> (fbird *fb, float a[9])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga4">fbGetQuaternion</a> (fbird *fb, float q[4])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga5">fbGetButton</a> (fbird *fb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga6">fbGetBird</a> (fbird *fb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DataMethods.html#ga7">fbGetTime</a> (fbird *fb)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
After a data record has been sent by the flock, the <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> method can be used to retrieve it. Data records can be requested from the flock via either the <a class="el" href="group__RequestMethods.html#ga0">fbStream()</a> or <a class="el" href="group__RequestMethods.html#ga2">fbPoint()</a> methods.<p>
After <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> has been called, the various fbGetXX() methods extract various pieces of information from the data record. The <a class="el" href="group__DataMethods.html#ga6">fbGetBird()</a> method should always be used to check which bird the data record is for, unless there is only a single bird. <hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="flock.h::fbUpdate"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int fbUpdate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the central function in the flock interface: it retrieves a single data record from the flock.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>only for FB_NONBLOCK mode: return value is 0 if no new information has been received from the bird since the last call (in FB_THREAD or FB_NOTHREAD mode the return value is always 1)</dd></dl>
If <a class="el" href="group__RequestMethods.html#ga2">fbPoint()</a> is used to request data records from the flock, then every call to <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> must be preceeded by <a class="el" href="group__RequestMethods.html#ga2">fbPoint()</a>.<p>
If <a class="el" href="group__RequestMethods.html#ga0">fbStream()</a> is used to put the flock into stream mode, then <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> is used to obtain the most recent data record that was sent from the flock.<p>
In particular, if <a class="el" href="group__SetupMethods.html#ga3">fbOpen()</a> was called with FB_THREAD set, then <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> will wait for the next data record to be sent from the flock or will return immediately if there is already a data record waiting. If <a class="el" href="group__SetupMethods.html#ga3">fbOpen()</a> was called with FB_NONBLOCK, then <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> will always return immediately and the return value will be 0 if a new data record has not yet arrived.     </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="flock.h::fbGetPosition"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void fbGetPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname" nowrap> <em>fb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>xyz</em>[3]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the position returned in the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> data record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xyz</em>&nbsp;</td><td>storage space for the position to be returned in</td></tr>
  </table>
</dl>
The bird positions are only available if <a class="el" href="group__ConfigureMethods.html#ga1">fbSetFormat()</a> was called with one of the following modes: FB_POSITION, FB_POSITION_ANGLES, FB_POSITION_MATRIX, FB_POSITION_QUATERNION.     </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="flock.h::fbGetAngles"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void fbGetAngles           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname" nowrap> <em>fb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>zyx</em>[3]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the euler angles returned in the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> data record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zyx</em>&nbsp;</td><td>storage space for the angles to be returned in</td></tr>
  </table>
</dl>
The bird angles are only available if <a class="el" href="group__ConfigureMethods.html#ga1">fbSetFormat()</a> was called with one of the following modes: FB_ANGLES, FB_POSITION_ANGLES.     </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="flock.h::fbGetMatrix"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void fbGetMatrix           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname" nowrap> <em>fb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>[9]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the matrix returned in the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> data record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>storage space for the nine matrix elements, where the first three numbers are the first column, the next three numbers are the middle column, and the final three numbers are the final matrix column</td></tr>
  </table>
</dl>
The bird matrix is only available if <a class="el" href="group__ConfigureMethods.html#ga1">fbSetFormat()</a> was called with one of the following modes: FB_MATRIX, FB_POSITION_MATRIX.<p>
It is almost always better to request angles from the flock and convert the angles to a matrix using <a class="el" href="group__ConversionMethods.html#ga0">fbMatrixFromAngles()</a> because this reduces the amount of information that must be transferred through the serial port.     </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="flock.h::fbGetQuaternion"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void fbGetQuaternion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname" nowrap> <em>fb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>q</em>[4]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the quaternion returned in the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> data record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>storage space for the quaternion to be returned in</td></tr>
  </table>
</dl>
The bird quaternion is only available if <a class="el" href="group__ConfigureMethods.html#ga1">fbSetFormat()</a> was called with one of the following modes: FB_QUATERNION, FB_POSITION_QUATERNION.     </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="flock.h::fbGetButton"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int fbGetButton           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the button state returned in the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a> data record.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>button state:<ul>
<li>0x00 no button was pressed</li><li>0x10 left button was pressed</li><li>0x30 middle (or middle and left) was pressed</li><li>0x70 right (or right and any other) was pressed</li></ul>
</dd></dl>
The return value is always zero unless fbButtonMode() has been used to turn on button reporting.     </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="flock.h::fbGetBird"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int fbGetBird           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the fbb address of the bird for the data record obtained through the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a value between 1 and <em>n</em> where <em>n</em> is the number of birds in the flock, or 0 if an error occurred</dd></dl>
If the flock is not operating in group mode, then the return value is always 1. A return value of zero indicates that a phase error or some other communication problem occurred with the flock.     </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="flock.h::fbGetTime"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double fbGetTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fbird *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the timestamp (in seconds since 1970) for the last <a class="el" href="group__DataMethods.html#ga0">fbUpdate()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fb</em>&nbsp;</td><td>pointer to an fbird structure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an absolute time value in seconds</dd></dl>
The time is generated by the computer, not by the flock. The time is only accurate to within a few milliseconds.     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jan 12 16:38:31 2006 for Flock by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
